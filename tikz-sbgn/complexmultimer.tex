\pgfdeclareshape{complexmultimer}{
    \inheritsavedanchors[from=rectangle]
    \inheritanchorborder[from=rectangle]

    \foreach \a in {center, north, south, west, east, south east, south west, north east, north west}
    {
        \inheritanchor[from=rectangle]{\a}
    }

    \backgroundpath{
        \def\cut{0.1}
        \def\offset{0.1}
        \pgf@process{\southwest}
        \pgfgetlastxy{\xa}{\ya}
        \pgf@process{\northeast}
        \pgfgetlastxy{\xb}{\yb}
        \newdimen\width
        \pgfmathsetlength{\width}{\xb-\xa-\offset*(\yb-\ya)}
        \newdimen\height
        \pgfmathsetlength{\height}{(1-\offset)*(\yb-\ya)}

        \pgfmathsetlength{\pgf@xc}{\xa+\cut*\width}
        \pgf@yc=\yb
        \pgfpathmoveto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@xc}{\xa+(1-\cut)*(\width)}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@xc}{\xa+\width}
        \pgfmathsetlength{\pgf@yc}{\yb-\cut*\height}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@yc}{\yb-(1-\cut)*\height}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@xc}{\xa+(1-\cut)*(\width)}
        \pgfmathsetlength{\pgf@yc}{\yb-\height}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@xc}{\xa+\cut*(\width)}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@yc}{\yb-(1-\cut)*\height}
        \pgf@xc = \xa
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@yc}{\yb-\cut*\height}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfpathclose

        \pgfmathsetlength{\pgf@xc}{\xb-\width}
        \pgfmathsetlength{\pgf@yc}{\yb-\height+\cut*\height-\offset*(\yb-\ya)/\width*\height}
        \pgfpathmoveto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@yc}{\ya+\cut*\height}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@xc}{\xb-\width+\cut*\width}
        \pgf@yc=\ya
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@xc}{\xb-\cut*\width}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgf@xc=\xb
        \pgfmathsetlength{\pgf@yc}{\ya+\cut*\height}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@yc}{\ya+(1-\cut)*\height}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@xc}{\xa+\width}
        \pgfmathsetlength{\pgf@yc}{\ya+(1-\cut)*\height+\cut*\height-\height*(\cut*\width-\offset*(\yb-\ya))/\width}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@yc}{\yb-(1-\cut)*\height}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@xc}{\xa+(1-\cut)*(\width)}
        \pgfmathsetlength{\pgf@yc}{\yb-\height}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfmathsetlength{\pgf@xc}{\xa+\cut*(\width)}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfpathclose
    }
    \foregroundpath{
        \pgfkeysgetvalue{/pgf/clone}{\clone}
        \ifx\clone\true
            \def\cloneoffset{0.25}
            \def\cut{0.1}
            \def\offset{0.1}
            \pgf@process{\southwest}
            \pgfgetlastxy{\xa}{\ya}
            \pgf@process{\northeast}
            \pgfgetlastxy{\xb}{\yb}
            \newdimen\width
            \pgfmathsetlength{\width}{\xb-\xa-\offset*(\yb-\ya)}
            \newdimen\height
            \pgfmathsetlength{\height}{(1-\offset)*(\yb-\ya)}

            \pgf@xc=\xa
            \pgfmathsetlength{\pgf@yc}{\yb-(1-\cloneoffset)*(\height)}
            \pgfpathmoveto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@xc}{\xa+\width}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@yc}{\yb-(1-\cut)*\height}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@xc}{\xa+(1-\cut)*(\width)}
            \pgfmathsetlength{\pgf@yc}{\yb-\height}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@xc}{\xa+\cut*(\width)}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@yc}{\yb-(1-\cut)*\height}
            \pgf@xc = \xa
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfpathclose

            \pgfmathsetlength{\pgf@xc}{\xb-\width}
            \pgfmathsetlength{\pgf@yc}{\yb-\height+\cut*\height-\offset*(\yb-\ya)/\width*\height}
            \pgfpathmoveto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@yc}{\ya+\cut*\height}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@xc}{\xb-\width+\cut*\width}
            \pgf@yc=\ya
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@xc}{\xb-\cut*\width}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgf@xc=\xb
            \pgfmathsetlength{\pgf@yc}{\ya+\cut*\height}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@yc}{\ya+\cloneoffset*\height}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@xc}{\xa+\width}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@yc}{\ya+(1-\cut)*\height+\cut*\height-\height*(\cut*\width-\offset*(\yb-\ya))/\width}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@yc}{\yb-(1-\cut)*\height}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@xc}{\xa+(1-\cut)*(\width)}
            \pgfmathsetlength{\pgf@yc}{\yb-\height}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfmathsetlength{\pgf@xc}{\xa+\cut*(\width)}
            \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
            \pgfpathclose
            \pgfsetfillcolor{\tikz@strokecolor}
            \pgfusepath{stroke, fill}
        \fi
    }
}
