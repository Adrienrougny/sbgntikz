\documentclass{article}

\usepackage{tikz}
\usepackage{xcolor}

\usetikzlibrary{sbgn}
\usetikzlibrary{external}
\usetikzlibrary{calc}

\tikzexternalize
% \tikzset{external/force remake}

\begin{document}

\newdimen\canvasheight
\canvasheight=145px
\newdimen\canvaswidth
\canvaswidth=145px

\colorlet{colorpd}{blue!40}
\colorlet{colorpdlight}{blue!10}
\colorlet{coloraf}{red!50}
\colorlet{coloraflight}{red!10}
\colorlet{colornormal}{black}
\colorlet{colorlight}{black!40}

\tikzset{canvas/.style={shape=rectangle, draw = black, line width= 0.2pt, minimum width=\canvaswidth, minimum height=\canvasheight},
    pd/.style={fill=colorpd, text=colornormal, draw=colornormal},
    pdlight/.style={fill=colorpdlight, draw=colorlight, text=colorlight},
    af/.style={fill=coloraf, text=colornormal, draw=colornormal},
    aflight/.style={fill=coloraflight, draw=colorlight, text=colorlight}
}

\tikzsetexternalprefix{figures/pd/}

\foreach \glyph in {macromolecule, nucleicacidfeature, simplechemical, unspecifiedentity, complex, perturbation, phenotype}
{
\tikzsetnextfilename{\glyph}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[\glyph, pd] at (canvas.center) {LABEL};
\end{tikzpicture}
}

\tikzsetnextfilename{emptyset}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[emptyset, pd] at (canvas.center) {};
\end{tikzpicture}

\foreach \glyph in {macromolecule, nucleicacidfeature, simplechemical, unspecifiedentity, complex}
{
\tikzsetnextfilename{cloned\glyph}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[\glyph, clone, pd] at (canvas.center) {LABEL};
\end{tikzpicture}
}

\foreach \glyph in {macromolecule, nucleicacidfeature, simplechemical, complex}
{
\tikzsetnextfilename{\glyph multimer}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[\glyph multimer, pd] at (canvas.center) {LABEL};
\end{tikzpicture}

\tikzsetnextfilename{cloned\glyph multimer}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[\glyph multimer, clone, pd] at (canvas.center) {LABEL};
\end{tikzpicture}
}

\foreach \glyph in {genericprocess, omittedprocess, unknownprocess, dissociation}
{
\tikzsetnextfilename{\glyph}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[\glyph, pd] at (canvas.center) {};
\end{tikzpicture}
}

\tikzsetnextfilename{association}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[association] at (canvas.center) {};
\end{tikzpicture}

\foreach \glyph in {and, or, not, delay}
{
    \tikzsetnextfilename{\glyph}
    \begin{tikzpicture}
        \node[canvas] (canvas) {};
        \node[\glyph, pd] at (canvas.center) {};
    \end{tikzpicture}
}

\tikzsetnextfilename{compartment}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[compartment, shape=rectangleroundedcorners, pd, minimum width=100pt, minimum height=70pt] at (canvas.center) {LABEL};
\end{tikzpicture}

\tikzsetnextfilename{statevariable}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[macromolecule, pdlight] (m) at (canvas.center) {EPN};
    \node[sv, pd] at (m.135) {val@var};
\end{tikzpicture}

\tikzsetnextfilename{unitofinformation}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[macromolecule, pdlight] (m) at (canvas.center) {EPN};
    \node[ui, pd] at (m.135) {pre:label};
\end{tikzpicture}

\foreach \glyph in {modulation, stimulation, catalysis, necessarystimulation, absolutestimulation, inhibition, absoluteinhibition}
{
\tikzsetnextfilename{\glyph}
\begin{tikzpicture}
    \node[unspecifiedentity, pdlight] (m1) {EPN};
    \node[genericprocess, pdlight, below = of m1, inner sep=0pt] (m2) {PN};
    \draw[\glyph] (m1) -- (m2);
    \node[canvas] (canvas) at ($(m1.north)!0.5!(m2.south)$) {};
\end{tikzpicture}
}

\foreach \glyph in {consumption, reversible}
{
    \tikzsetnextfilename{\glyph}
    \begin{tikzpicture}
        \node[unspecifiedentity, pdlight] (m1) {EPN};
        \node[genericprocess, pdlight, right = of m1, inner sep=0pt] (m2) {PN};
        \draw[\glyph] (m1) -- (m2);
        \node[canvas] (canvas) at ($(m1.west)!0.5!(m2.east)$) {};
    \end{tikzpicture}
}

\tikzsetnextfilename{production}
\begin{tikzpicture}
    \node[genericprocess, pdlight, inner sep=0pt] (m1) {PN};
    \node[unspecifiedentity, right = of m1, pdlight] (m2) {EPN};
    \draw[production] (m1) -- (m2);
    \node[canvas] (canvas) at ($(m1.west)!0.5!(m2.east)$) {};
\end{tikzpicture}

\tikzsetnextfilename{logicarc}
\begin{tikzpicture}
    \node[unspecifiedentity, pdlight] (m1) {EPN};
    \node[and, pdlight, below = of m1] (m2) {};
    \draw[logicarc] (m1) -- (m2);
    \node[canvas] (canvas) at ($(m1.north)!0.5!(m2.south)$) {};
\end{tikzpicture}

\tikzsetnextfilename{tag}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[tag, pd] at (canvas.center) {LABEL};
\end{tikzpicture}

\tikzsetnextfilename{submap}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[submap, pd] (submap) at (canvas.center) {LABEL};
    \node[tag, anchor = west, signal to = east, pdlight] at (submap.160) {A};
    \node[tag, anchor = west, signal to = east, pdlight] at (submap.200) {B};
    \node[tag, anchor = east, signal to = west, pdlight] at (submap.0) {C};
\end{tikzpicture}

\tikzsetnextfilename{equivalencearc}
\begin{tikzpicture}
    \node[unspecifiedentity, pdlight] (m1) {EPN};
    \node[tag, signal to = west, pdlight, right = of m1] (m2) {TAG};
    \draw[equivalencearc] (m1) -- (m2);
    \node[canvas] (canvas) at ($(m1.west)!0.5!(m2.east)$) {};
\end{tikzpicture}

\tikzsetexternalprefix{figures/af/}

\foreach \glyph in {biologicalactivity, phenotype}
{
    \tikzsetnextfilename{\glyph}
    \begin{tikzpicture}
        \node[canvas] (canvas) {};
        \node[\glyph, af, minimum width = 60pt, minimum height = 35pt] (m) at (canvas.center) {LABEL};
    \end{tikzpicture}
}

\foreach \glyph in {macromolecule, nucleicacidfeature, simplechemical, unspecifiedentity, complex, perturbation}
{
    \tikzsetnextfilename{ui\glyph}
    \begin{tikzpicture}
        \node[canvas] (canvas) {};
        \node[biologicalactivity, aflight] (m) at (canvas.center) {AN};
        \node[ui\glyph, af] at (m.140) {LABEL};
    \end{tikzpicture}
}

\foreach \glyph in {and, or, not, delay}
{
    \tikzsetnextfilename{\glyph}
    \begin{tikzpicture}
        \node[canvas] (canvas) {};
        \node[\glyph, af] at (canvas.center) {};
    \end{tikzpicture}
}

\tikzsetnextfilename{compartment}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[compartment, shape=rectangleroundedcorners, af, minimum width=100pt, minimum height=70pt] at (canvas.center) {LABEL};
\end{tikzpicture}

\foreach \glyph in {modulation, stimulation, catalysis, necessarystimulation, absolutestimulation, inhibition, absoluteinhibition}
{
\tikzsetnextfilename{\glyph}
\begin{tikzpicture}
    \node[biologicalactivity, aflight] (m1) {AN};
    \node[biologicalactivity, aflight, below = of m1, inner sep=0pt] (m2) {AN};
    \draw[\glyph] (m1) -- (m2);
    \node[canvas] (canvas) at ($(m1.north)!0.5!(m2.south)$) {};
\end{tikzpicture}
}

\tikzsetnextfilename{logicarc}
\begin{tikzpicture}
    \node[biologicalactivity, aflight] (m1) {AN};
    \node[and, aflight, below = of m1] (m2) {};
    \draw[logicarc] (m1) -- (m2);
    \node[canvas] (canvas) at ($(m1.north)!0.5!(m2.south)$) {};
\end{tikzpicture}

\tikzsetnextfilename{tag}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[tag, af] at (canvas.center) {LABEL};
\end{tikzpicture}

\tikzsetnextfilename{submap}
\begin{tikzpicture}
    \node[canvas] (canvas) {};
    \node[submap, af] (submap) at (canvas.center) {LABEL};
    \node[tag, anchor = west, signal to = east, aflight] at (submap.160) {A};
    \node[tag, anchor = west, signal to = east, aflight] at (submap.200) {B};
    \node[tag, anchor = east, signal to = west, aflight] at (submap.0) {C};
\end{tikzpicture}

\tikzsetnextfilename{equivalencearc}
\begin{tikzpicture}
    \node[biologicalactivity, aflight] (m1) {AN};
    \node[tag, signal to = west, aflight, right = of m1] (m2) {TAG};
    \draw[equivalencearc] (m1) -- (m2);
    \node[canvas] (canvas) at ($(m1.west)!0.5!(m2.east)$) {};
\end{tikzpicture}

\end{document}
